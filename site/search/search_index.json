{"config":{"lang":["ja"],"separator":"[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Home","text":"<p>\u3069\u3053\u304b\u306e\u3060\u308c\u304b\u306e\u96d1\u591a\u306a\u77e5\u8b58\u3092\u6574\u7406\u3059\u308b\u305f\u3081\u306b\u7528\u610f\u3055\u308c\u305f\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\u3060\u3088</p> <p></p>"},{"location":"bbpll/","title":"BBPLL\u5165\u9580\u8b1b\u5ea7","text":"<p>\u30ac\u30c1\u76ee\u306e\u6280\u8853\u7cfb\u89e3\u8aac \u00d7 \u3086\u308b\u3075\u308f\u30dc\u30a4\u30b9\u30ed\u30a4\u30c9\u5287\u5834\u3001\u306e\u639b\u3051\u7b97\u3092\u305f\u3081\u3057\u3066\u307f\u308b\u30c6\u30b9\u30c8\u3002\u5927\u5b66\u306e\u8b1b\u7fa9\u30b9\u30e9\u30a4\u30c9\u3092\u4e26\u3079\u305f\u3060\u3051\u306e\u7d19\u829d\u5c45\u52d5\u753b\u307f\u305f\u3044\u306b\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u8272\u3005\u3068\u8a66\u884c\u932f\u8aa4\u3057\u305f\u7d50\u679c\u3001\u6700\u7d42\u7684\u306b\u81ea\u5206\u306e\u597d\u304d\u306a\u3082\u306e\u3092\u8a70\u3081\u8fbc\u307f\u307e\u304f\u3063\u305f\u3060\u3051\u306e\u4f55\u304b\u3088\u304f\u308f\u304b\u306a\u3044\u52d5\u753b\u306b\u4ed5\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\u3067\u3082\u3086\u304b\u308a\u3055\u3093\u304c\u53ef\u611b\u3044\u304b\u3089\u3044\u3044\u3058\u3083\u306a\u3044\u3002\u30d2\u30f3\u30e1\u30eb\u306f\u3082\u3046\u3044\u306a\u3044\u3058\u3083\u306a\u3044\u3002</p>","tags":["PLL"]},{"location":"bbpll/#1-digital-bang-bang-pll","title":"1\u6642\u9593\u3067\u308f\u304b\u308b Digital Bang-Bang PLL","text":"\u958b\u59cb\u4f4d\u7f6e \u5185\u5bb9 \u8aad\u307f\u4e0a\u3052\u97f3\u58f0 00:00 PLL\u3063\u3066\u306a\u3093\u3067\u3059\u304b\uff1f \u7d50\u6708\u3086\u304b\u308a 02:08 BBPLL\u306e\u57fa\u672c\u69cb\u6210\u3092\u5b66\u307c\u3046 \u7d50\u6708\u3086\u304b\u308a\u3001\u7d32\u661f\u3042\u304b\u308a\u3001\u7434\u8449\u831c 12:02 \u5b89\u5b9a\u6761\u4ef6\u3092\u5c0e\u51fa\u3057\u3088\u3046 \u7d50\u6708\u3086\u304b\u308a 32:03 Small-\u03c3 regime \u6771\u5317\u304d\u308a\u305f\u3093\u3001\u5f26\u5dfb\u30de\u30ad 45:01 Large-\u03c3 regime \u7d50\u6708\u3086\u304b\u308a 52:17 \u30b8\u30c3\u30bf\u306e\u78ba\u7387\u5bc6\u5ea6\u95a2\u6570 \u3086\u3063\u304f\u308a\u970a\u5922 1:00:17 Power Spectral Density \u6771\u5317\u304d\u308a\u305f\u3093","tags":["PLL"]},{"location":"bbpll/#_1","title":"\u53c2\u8003\u6587\u732e","text":"<ul> <li> <p>Nicola Da Dalt, \"Theory and implementation of digital bang-bang frequency synthesizers for high speed serial data communications,\" Ph.D. Thesis, RWTH Aachen University, 2007.</p> </li> <li> <p>Ji Wang, \"Modeling And Implementation of All-Digital Phase-Locked Loop Based on Vernier Gated Ring Oscillator Time-to-Digital Converter,\" Master's Thesis, Lund University, 2014.</p> </li> <li> <p>Lianbo Wu, \"An Ultra-Low-Power ADPLL for BLE Applications,\" Master Thesis, Delft University of Technology, 2014.</p> </li> <li> <p>Stefan Tertinek, \"Output-Jitter Performance of Second-Order Digital Bang-Bang Phase-Locked Loops with Nonaccumulative Reference Clock Jitter,\" IEEE Transactions on Circuits and Systems II: Express Briefs, 58(6), 331-335, 2007.</p> </li> <li> <p>Stefan Tertinek, \"Statistical Analysis of First-Order Bang-Bang Phase-Locked Loops Using Sign-Dependent Random-Walk Theory,\" IEEE Transactions on Circuits and Systems I: Regular Papers, 57(9), 2367-2380, 2010.</p> </li> <li> <p>Stefan Tertinek, \"Binary Phase Detector Gain in Bang-Bang Phase-Locked Loops with DCO Jitter,\" IEEE Transactions on Circuits and Systems II: Express Briefs, 57(12), 941-945, 2010.</p> </li> <li> <p>Pratheep Bondalapati, \"Timing Jitter Distribution and Power Spectral Density of a Second-Order Bang-Bang Digital PLL With Transport Delay Using Fokker-Planck Equations,\" IEEE Transactions on VLSI Systems, 27(2), 398-406, 2018.</p> </li> <li> <p>Daniel Liberzon, \"Nonlinear feedback systems perturbed by noise: Steady-state probability distributions and optimal control,\" IEEE Transactions on Automatic Control, 45(6), 1116-1130, 2000.</p> </li> <li> <p>R. Valery Roy, \"Power Spectral Density of Nonlinear System Response: The Recursion Method,\" Journal of Applied Mechanics, 60(2), 358-365, 1993.</p> </li> </ul>","tags":["PLL"]},{"location":"dsim/","title":"DSim\u306e\u4f7f\u3044\u65b9","text":"<p>\u67d0RTL\u754c\u9688\u3067\u8a71\u984c\u6cb8\u9a30\u4e2d\u306eVerilog simulator\u3001Altair DSim\u3092\u8a66\u3057\u306b\u4f7f\u3063\u3066\u307f\u308b\u30c6\u30b9\u30c8\u3002\u8da3\u5473\u3067\u7121\u6599\u3067\u4f7f\u3048\u308b\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u306e\u4e2d\u3067\u306f\u3001\u3053\u308c\u304c\u73fe\u72b6\u6700\u5f37\u306a\u6c17\u304c\u3059\u308b\u3002</p>","tags":["SystemVerilog","DSim"]},{"location":"dsim/#dsim","title":"DSim\u306e\u7279\u5fb4","text":"<ul> <li>\u500b\u4eba\u5411\u3051\u306e1\u30b8\u30e7\u30d6\u9650\u5b9a\u306e\u7121\u511f\u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5229\u7528\u53ef\u80fd\u3002</li> <li>\u8ffd\u52a0\u306e\u6709\u511f\u30e9\u30a4\u30bb\u30f3\u30b9\u306a\u3057\u3067SystemVerilog\u306e\u3059\u3079\u3066\u306e\u6a5f\u80fd\u304c\u5229\u7528\u53ef\u80fd\u3002<ul> <li>SystemVerilog assertion (SVA)</li> <li>User-defined nettype (UDN)</li> <li>UVM (UVM-1.1b, UVM-1.1d, UVM-1.2, and UVM-2020.3.1) <sup>1</sup></li> </ul> </li> </ul>","tags":["SystemVerilog","DSim"]},{"location":"dsim/#_1","title":"\u4ed6\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3068\u306e\u6bd4\u8f03","text":"DSim Questa<sup>2</sup> Icarus Verilog SVA \u2714 OK \u2714 OK \u274c \u5373\u6642\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u306e\u307f\u5bfe\u5fdc UVM \u2714 OK \u2714 OK \u274c \u975e\u5bfe\u5fdc \u5236\u7d04\u4ed8\u304d\u30e9\u30f3\u30c0\u30e0<sup>3</sup> \u2714 OK \u274c <code>svverification</code>\u304c\u5fc5\u8981 \u274c \u975e\u5bfe\u5fdc UDN \u2714 OK \u274c <code>svrnm</code>\u304c\u5fc5\u8981 \u274c \u975e\u5bfe\u5fdc \u30e9\u30a4\u30bb\u30f3\u30b9\u66f4\u65b0 \u274c 90\u65e5\u3054\u3068 \u274c 1\u5e74\u3054\u3068 \u2714 \u306a\u3057","tags":["SystemVerilog","DSim"]},{"location":"dsim/#_2","title":"\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u3068\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c","text":"<p>DSim\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u3001<code>DSIM_LICENSE</code>\u3084<code>DSIM_HOME</code>\u3001<code>PATH</code>\u306a\u3069\u306e\u74b0\u5883\u5909\u6570\u306f\u81ea\u52d5\u3067\u8a2d\u5b9a\u3055\u308c\u307e\u305b\u3093\u3002\u3057\u305f\u304c\u3063\u3066\u3001\u3053\u308c\u3089\u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u304b\u3089\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u59cb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002DSim\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306b\u3001\u305d\u306e\u305f\u3081\u306eBAT\u30d5\u30a1\u30a4\u30eb<code>shell_activate.bat</code>\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3059\u3002</p> run.bat<pre><code>@echo off\nset \"DSIM_LICENSE=\\Path\\To\\dsim-license.json\"\ncd \"C:\\Program Files\\Altair\\DSim\\2025.1\"\ncall shell_activate.bat\ncd %~dp0\ndsim -f options.txt\npause\nexit\n</code></pre> options.txt<pre><code>+acc\n-waves waves.vcd\ntest.sv\n</code></pre> <p>DSim\u3067\u306f<code>*.mxd</code>\u3068\u3044\u3046\u72ec\u81ea\u5f62\u5f0f\u3067\u6ce2\u5f62\u3092\u4fdd\u5b58\u3067\u304d\u307e\u3059\u304c\u3001DSim\u306e\u6ce2\u5f62\u30d3\u30e5\u30fc\u30ef\u30fc\u304creal\u5909\u6570\u306e\u30a2\u30ca\u30ed\u30b0\u8868\u793a\u306b\u5bfe\u5fdc\u3057\u3066\u304a\u3089\u305a\u3061\u3087\u3063\u3068\u4e0d\u4fbf\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u6ce2\u5f62\u30d5\u30a1\u30a4\u30eb\u3092<code>*.vcd</code>\u3067\u4fdd\u5b58\u3057\u3001GTKWave\u3092\u4f7f\u3063\u3066\u7d50\u679c\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u3001VCD\u5f62\u5f0f\u306e\u307e\u307e\u3060\u3068\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u9577\u304f\u306a\u3063\u305f\u3068\u304d\u306b\u6ce2\u5f62\u8868\u793a\u304c\u91cd\u304f\u306a\u308b\u306e\u3067\u3001VCD\u5f62\u5f0f\u3092FST\u5f62\u5f0f\u306b\u5909\u63db\u3057\u3066\u304b\u3089GTKWave\u3067\u958b\u304f\u3088\u3046\u306b\u3057\u307e\u3059\u3002</p> gtkwave.bat<pre><code>@echo off\nset vcd2fst=\"Path\\To\\gtkwave64\\bin\\vcd2fst.exe\"\nset gtkwave=\"Path\\To\\gtkwave64\\bin\\gtkwave.exe\"\ncd %~dp0\nif exist waves.vcd (\n  echo VCD2FST\n  %vcd2fst% waves.vcd waves.fst\n  del waves.vcd\n)\n%gtkwave% waves.fst\nexit\n</code></pre>","tags":["SystemVerilog","DSim"]},{"location":"dsim/#_3","title":"\u52d5\u4f5c\u78ba\u8a8d\u7528\u306e\u7c21\u5358\u306a\u30c6\u30b9\u30c8\u30d9\u30f3\u30c1","text":"test.sv<pre><code>module test;\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  bit clk;\n\n  initial begin\n    $monitor(\"clk = %0b\", clk);\n    repeat(4) begin\n      #1ns;\n      clk = ~clk;\n    end\n    $finish();\n  end\n\nendmodule\n</code></pre>","tags":["SystemVerilog","DSim"]},{"location":"dsim/#_4","title":"\u5b9f\u884c\u7d50\u679c","text":"<pre><code>=S:Begin run-time elaboration and static initialization...\n=N:[dumpVCD] preparing VCD dump to 'waves.vcd'.\n=N:[dump] Dump started at time 0\n=N:Starting event scheduler...\nclk = 0\nclk = 1\nclk = 0\nclk = 1\n=T:Simulation terminated by $finish at time 4000 (test.sv:13);\n</code></pre> <ol> <li> <p>How To: Use UVM in DSim: \"DSim comes with UVM-1.1b, UVM-1.1d, UVM-1.2, and UVM-2020.3.1\" \u21a9</p> </li> <li> <p>\u7121\u511f\u7248\u306e\u540d\u79f0\u306f\u3001Questa-Intel FPGA Starter Edition\u3067\u3059\u3002\u00a0\u21a9</p> </li> <li> <p>Constraint Random Verification (CRV)\u00a0\u21a9</p> </li> </ol>","tags":["SystemVerilog","DSim"]},{"location":"paemel/","title":"2\u6b21CPPLL\u30e2\u30c7\u30eb","text":"<p>\u4e0b\u8a18\u306e\u8ad6\u6587\u3092\u8aad\u3093\u3067\u30012\u6b21CPPLL\u306e\u975e\u7dda\u5f62\u96e2\u6563\u6642\u9593\u30e2\u30c7\u30eb\u306e\u5f0f\u3092\u6574\u7406\u3057\u3066\u307f\u308b\u30c6\u30b9\u30c8\u3002</p> <ul> <li>Analysis of a charge-pump PLL: a new model (1994)</li> <li>Comment on \"Analysis of a Charge-Pump PLL: A New Model\" by M. van Paemel  (2019)</li> </ul>","tags":["PLL"]},{"location":"paemel/#corrected-van-paemel-model","title":"Corrected Van Paemel model","text":"","tags":["PLL"]},{"location":"paemel/#case-1","title":"Case 1","text":"<p>\\(\\tau(k) \\ge 0\\) \u304b\u3064 \\(c \\le 0\\) \u306e\u3068\u304d\u3001\u3064\u307e\u308a\u3001\u57fa\u6e96\u30a8\u30c3\u30b8\u304c\u5148\u884c\u3057\u3066\u3044\u3066\u3001\u6b21\u306e\u57fa\u6e96\u30a8\u30c3\u30b8\u307e\u3067\u306b\u5206\u5468\u30a8\u30c3\u30b8\u304c\u9593\u306b\u5408\u308f\u306a\u3044\u5834\u5408\u3002\u5143\u306eVan Paemel\u306e\u8ad6\u6587\u306b\u304a\u3051\u308bCase 1\u306b\u5bfe\u5fdc\u3059\u308b\u3002</p> <p></p> \\[ \\begin{align}   \\tau(k+1) = \\frac{-b+\\sqrt{b^2-4ac}}{2a} \\end{align} \\]","tags":["PLL"]},{"location":"paemel/#case-2","title":"Case 2","text":"<p>\\(\\tau(k) \\ge 0\\) \u304b\u3064 \\(c &gt; 0\\) \u306e\u3068\u304d\u3001\u3064\u307e\u308a\u3001\u57fa\u6e96\u30a8\u30c3\u30b8\u304c\u5148\u884c\u3057\u3066\u3044\u3066\u3001\u6b21\u306e\u57fa\u6e96\u30a8\u30c3\u30b8\u307e\u3067\u306b\u5206\u5468\u30a8\u30c3\u30b8\u304c\u9593\u306b\u5408\u3046\u5834\u5408\u3002\u5143\u306eVan Paemel\u306e\u8ad6\u6587\u306b\u304a\u3051\u308bCase 3\u306b\u5bfe\u5fdc\u3059\u308b\u3002</p> <p></p> \\[ \\begin{align}   \\tau(k+1) = \\frac{N}{f_\\text{vco}} - T + (\\tau(k) \\bmod{T}) \\end{align} \\]","tags":["PLL"]},{"location":"paemel/#case-3","title":"Case 3","text":"<p>\\(\\tau(k) &lt; 0\\) \u304b\u3064 \\(l_b \\le T\\) \u306e\u3068\u304d\u3001\u3064\u307e\u308a\u3001\u5206\u5468\u30a8\u30c3\u30b8\u304c\u5148\u884c\u3057\u3066\u3044\u3066\u3001\u6b21\u306e\u57fa\u6e96\u30a8\u30c3\u30b8\u307e\u3067\u306b\u5206\u5468\u30a8\u30c3\u30b8\u304c\u9593\u306b\u5408\u3046\u5834\u5408\u3002\u5143\u306eVan Paemel\u306e\u8ad6\u6587\u306b\u304a\u3051\u308bCase 2\u306b\u5bfe\u5fdc\u3059\u308b\u3002</p> <p></p> \\[ \\begin{align}   \\tau(k+1) = l_b - T \\end{align} \\]","tags":["PLL"]},{"location":"paemel/#case-4","title":"Case 4","text":"<p>\\(\\tau(k) &lt; 0\\) \u304b\u3064 \\(l_b &gt; T\\) \u306e\u3068\u304d\u3001\u3064\u307e\u308a\u3001\u5206\u5468\u30a8\u30c3\u30b8\u304c\u5148\u884c\u3057\u3066\u3044\u3066\u3001\u6b21\u306e\u57fa\u6e96\u30a8\u30c3\u30b8\u307e\u3067\u306b\u5206\u5468\u30a8\u30c3\u30b8\u304c\u9593\u306b\u5408\u308f\u306a\u3044\u5834\u5408\u3002\u5143\u306eVan Paemel\u306e\u8ad6\u6587\u306b\u304a\u3051\u308bCase 6\u306b\u5bfe\u5fdc\u3059\u308b\u3002</p> <p></p> \\[ \\begin{align}   \\tau(k+1) = \\frac{-b+\\sqrt{b^2-4ad}}{2a} \\end{align} \\] <p>\u305f\u3060\u3057\u3001</p> \\[ \\begin{align*}   &amp;f_\\text{vco} = K_\\text{vco} v(k) + f_0 \\\\   &amp;a = {K_\\text{vco} I_\\text{cp}}/{2C_1} \\\\   &amp;b = f_\\text{vco}+ K_\\text{vco} I_\\text{cp} R_1 \\\\   &amp;c = f_\\text{vco} (T - (\\tau(k) \\bmod T))  - N \\\\   &amp;l_b = ({N - Sl_a})/{f_\\text{vco}} \\\\   &amp;Sl_a = Sl_k \\bmod N \\\\   &amp;Sl_k = -(f_\\text{vco} - I_\\text{cp} R_1 K_\\text{vco})\\tau(k) + K_\\text{vco} I_\\text{cp} {\\tau(k)^2}/{2C_1} \\\\   &amp;d = Sl_a + f_\\text{vco} T - N \\end{align*} \\]","tags":["PLL"]},{"location":"paemel/#_1","title":"\u96fb\u5727\u306e\u66f4\u65b0\u5f0f","text":"<p>\u524d\u8ff0\u306e\u3059\u3079\u3066\u306e\u5834\u5408\u306b\u304a\u3044\u3066\u3001</p> \\[ \\begin{align}   v(k+1) = v(k) + \\frac{I_\\text{cp}}{C_1}\\tau(k+1) \\end{align} \\]","tags":["PLL"]},{"location":"paemel_comparison/","title":"2\u6b21CPPLL\u30e2\u30c7\u30eb\u306e\u6bd4\u8f03","text":"<p>Kuznetsov N.V.\u304c2019\u5e74\u306b\u767a\u8868\u3057\u305f\u3001Van Paemel\u306e2\u6b21CPPLL\u30e2\u30c7\u30eb\u306e\u554f\u984c\u70b9\u306e\u4fee\u6b63\u306b\u95a2\u3059\u308b\u8ad6\u6587\u306e\u5f0f\u304c\u3001\u672c\u5f53\u306b2\u6b21CPPLL\u306e\u52d5\u4f5c\u3092\u6b63\u78ba\u306b\u8868\u73fe\u3067\u304d\u3066\u3044\u308b\u306e\u304b\u78ba\u8a8d\u3057\u3066\u307f\u308b\u30c6\u30b9\u30c8\u3002\u8d64\u7dda\u304c\u4e00\u822c\u7684\u306aCPPLL\u306e\u69cb\u9020\u30e2\u30c7\u30eb\u3001\u7dd1\u7dda\u304c\u8ad6\u6587\u306e\u63d0\u793a\u3057\u3066\u3044\u308b\u6570\u5f0f\u30e2\u30c7\u30eb\u3067\u3059\u3002\u8d64\u7dda\u3068\u7dd1\u7dda\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u306a\u3093\u3068\u306a\u304f\u5927\u4e08\u592b\u305d\u3046\u3002</p> <p>Note</p> <p>\u8ecc\u9053\u304c\u3050\u308b\u3093\u3050\u308b\u3093\u3057\u3066\u305f\u307b\u3046\u304c\u898b\u3066\u3066\u305f\u306e\u3057\u3044\u306e\u3067\u3001\u4f4d\u76f8\u4f59\u88d5\u30ac\u30f3\u7121\u8996\u306a\u5b9a\u6570\u306b\u3057\u3066\u307e\u3059\u3002</p>","tags":["PLL"]},{"location":"paemel_comparison/#_1","title":"\u6bd4\u8f03\u7d50\u679c","text":"tau(k) and v(k)Trajectory on tau-v plane","tags":["PLL"]},{"location":"paemel_comparison/#_2","title":"\u5b9f\u884c\u30b9\u30af\u30ea\u30d7\u30c8","text":"run.batoptions.txt <pre><code>@echo off\nset \"DSIM_LICENSE=\\Path\\To\\dsim-license.json\"\ncd \"C:\\Program Files\\Altair\\DSim\\2025.1\"\ncall shell_activate.bat\ncd %~dp0\ndsim -f options.txt\npause\nexit\n</code></pre> <pre><code>-waves waves.vcd\ntest_st.sv\ntest_eq.sv\n</code></pre>","tags":["PLL"]},{"location":"paemel_comparison/#2cppll","title":"2\u6b21CPPLL\u30e2\u30c7\u30eb","text":"Corrected Van Paemel modelStructural model <pre><code>module test_eq #(\n  parameter real Fref = 0.1e9,\n  parameter real Kvco = 1.8e9,\n  parameter real Fmin = 0.1e9,\n  parameter real Vmin = 0.1,\n  parameter real Icp = 50e-6,\n  parameter real R1 = 1e3,\n  parameter real C1 = 10e-12,\n  parameter int Ndiv = 10,\n  parameter real Tau0 = 3.991e-08,\n  parameter real V0 = 1.996e-01\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  const real Tref = 1/Fref;\n\n  real tau, v;\n  real a, b, c, d;\n  real slk, sla;\n  real lb;\n  real fvco;\n  real keff;\n\n  let fmod(a, b) = (a - b*$floor(a/b));\n\n  initial begin\n\n    integer fh;\n    fh = $fopen(\"tau_eq.csv\", \"w\");\n    $fdisplay(fh, \"k,tau,v\");\n\n    tau = Tau0;\n    v = V0;\n\n    for (int k = 0; k &lt; 100; k++) begin\n      $fdisplay(fh, \"%0d,%.4e,%.4e\", k, tau, v);\n\n      if (v &lt; Vmin) begin\n        fvco = Fmin;\n        keff = 0.0;\n      end else begin\n        fvco = Fmin + Kvco * (v - Vmin);\n        keff = Kvco;\n      end\n\n      a = keff*Icp / (2*C1);\n      b = fvco + keff*Icp*R1;\n      c = (Tref - fmod(tau, Tref))*fvco - Ndiv;\n      slk = -(fvco - keff*Icp*R1)*tau + (keff*Icp / (2*C1))*(tau**2);\n      sla = fmod(slk, Ndiv);\n      lb = (Ndiv - sla) / fvco;\n      d = sla + Tref*fvco - Ndiv;\n\n      if (tau &gt;= 0) begin\n        if (c &lt;= 0 &amp;&amp; a != 0) begin\n          tau = (-b + $sqrt(b**2 - 4*a*c)) / (2*a);\n        end else begin\n          tau = Ndiv / fvco - Tref + fmod(tau, Tref);\n        end\n      end else begin\n        if (lb &gt; Tref &amp;&amp; a != 0) begin\n          tau = (-b + $sqrt(b**2 - 4*a*d)) / (2*a);\n        end else begin\n          tau = lb - Tref;\n        end\n      end\n\n      v += (Icp/C1)*tau;\n    end\n\n  end\n\nendmodule\n</code></pre> <pre><code>module test_st #(\n  parameter real Fref = 0.1e9,\n  parameter real Tstop = 20e-6\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  const real Tref = 1/Fref;\n\n  bit rclk;\n  initial begin\n    forever begin\n      #(0.5*Tref*1s);\n      rclk = ~rclk;\n    end\n  end\n\n  bit dclk;\n  bit vclk;\n\n  cppll cppll (\n    .rclk_i(rclk),\n    .dclk_o(dclk),\n    .vclk_o(vclk)\n  );\n\n  initial begin\n    #(Tstop*1s);\n    $finish();\n  end\n\n  initial begin\n    real t_start;\n    real tau;\n    real sgn;\n    integer fh;\n    int k;\n\n    fh = $fopen(\"tau_st.csv\", \"w\");\n    $fdisplay(fh, \"k,tau,v\");\n\n    forever begin\n      wait(cppll.icp != 0);\n      sgn = (cppll.icp &gt; 0) ? +1 : -1;\n      t_start = $realtime();\n      wait(cppll.icp == 0);\n      tau = sgn * (($realtime() - t_start)/1s);\n      $fdisplay(fh, \"%0d,%.4e,%.4e\", k, tau, cppll.vctrl);\n      k++;\n    end\n  end\n\nendmodule\n\nmodule cppll (\n  input bit rclk_i,\n  output bit dclk_o,\n  output bit vclk_o\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  bit up;\n  bit dn;\n\n  pfd pfd (\n    .rclk_i,\n    .dclk_i(dclk_o),\n    .up_o(up),\n    .dn_o(dn)\n  );\n\n  real icp;\n\n  cp cp (\n    .up_i(up),\n    .dn_i(dn),\n    .icp_o(icp)\n  );\n\n  real vctrl;\n\n  lpf lpf (\n    .icp_i(icp),\n    .vctrl_o(vctrl)\n  );\n\n  vco vco (\n    .vctrl_i(vctrl),\n    .vclk_o\n  );\n\n  fbdiv fbdiv (\n    .vclk_i(vclk_o),\n    .dclk_o\n  );\n\nendmodule\n\nmodule pfd #(\n  parameter real Delay = 1e-12\n)(\n  input bit rclk_i,\n  input bit dclk_i,\n  output bit up_o,\n  output bit dn_o\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  bit reset;\n\n  always_comb begin\n    reset = (up_o &amp; dn_o);\n  end\n\n  bit reset_delayed;\n\n  always @(reset) begin\n    #(Delay * 1s);\n    reset_delayed =  reset;\n  end\n\n  always_ff @(posedge rclk_i, posedge reset_delayed) begin\n    if (reset) begin\n      up_o &lt;= 1'b0;\n    end else begin\n      up_o &lt;= 1'b1;\n    end\n  end\n\n  always_ff @(posedge dclk_i, posedge reset_delayed) begin\n    if (reset) begin\n      dn_o &lt;= 1'b0;\n    end else begin\n      dn_o &lt;= 1'b1;\n    end\n  end\n\nendmodule\n\nmodule cp #(\n  parameter Icp = 50e-6\n)(\n  input bit up_i,\n  input bit dn_i,\n  output real icp_o\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  real iup;\n  always_comb begin\n    if (up_i) begin\n      iup = Icp;\n    end else begin\n      iup = 0;\n    end\n  end\n\n  real idn;\n  always_comb begin\n    if (dn_i) begin\n      idn = -Icp;\n    end else begin\n      idn = 0;\n    end\n  end\n\n  always_comb begin\n    icp_o = (iup + idn);\n  end\n\nendmodule\n\nmodule lpf #(\n  parameter real R1 = 1e3,\n  parameter real C1 = 10e-12,\n  parameter real Tstep = 10e-12\n)(\n  input real icp_i,\n  output real vctrl_o\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  real delta_vc;\n  real vc;\n\n  always #(Tstep*1s) begin\n    delta_vc = (icp_i / C1) * Tstep;\n    vc += delta_vc;\n  end\n\n  always_comb begin\n    vctrl_o = vc + R1*icp_i;\n  end\n\nendmodule\n\nmodule vco #(\n  parameter real Kvco = 1.8e9,\n  parameter real Fmin = 0.1e9,\n  parameter real Vmin = 0.1,\n  parameter real Tstep = 10e-12\n)(\n  input real vctrl_i,\n  output bit vclk_o\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  real frequency;\n\n  always_comb begin\n    if (vctrl_i &lt; Vmin) begin\n      frequency = Fmin;\n    end else begin\n      frequency = Fmin + (Kvco * (vctrl_i - Vmin));\n    end\n  end\n\n  const real PI = 4*$atan(1);\n  real phase;\n\n  always #(Tstep*1s) begin\n    phase += 2*PI*frequency*Tstep;\n    if (phase &gt; 2*PI) begin\n      phase = 0;\n    end\n  end\n\n  always_comb begin\n    if (phase &gt; PI) begin\n      vclk_o = 1'b1;\n    end else begin\n      vclk_o = 1'b0;\n    end\n  end\n\nendmodule\n\nmodule fbdiv #(\n  parameter int Ndiv = 10\n)(\n  input bit vclk_i,\n  output bit dclk_o\n);\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  int unsigned max_count;\n\n  always_comb begin\n    if (Ndiv &gt;= 1) begin\n      max_count = (Ndiv - 1);\n    end else begin\n      max_count = 0;\n    end\n  end\n\n  int unsigned count;\n\n  always_ff @(posedge vclk_i) begin\n    if (count == max_count) begin\n      count &lt;= 0;\n    end else begin\n      count &lt;= count + 1;\n    end\n  end\n\n  always_comb begin\n    if (count == max_count) begin\n      dclk_o = 1'b1;\n    end else begin\n      dclk_o = 1'b0;\n    end\n  end\n\nendmodule\n</code></pre>","tags":["PLL"]},{"location":"questa/","title":"Questa\u306e\u4f7f\u3044\u65b9","text":"<p>\u307f\u3093\u306a\u5927\u597d\u304d<code>ModelSim-ASE</code>\u306e\u5f8c\u7d99\u7248\u3001<code>Questa-FSE</code>\u3092\u8a66\u3057\u306b\u4f7f\u3063\u3066\u307f\u308b\u30c6\u30b9\u30c8\u3002\u30ea\u30c3\u30c1\u306aGUI\u3068\u30c7\u30d0\u30c3\u30ac\u304c\u307b\u3057\u3044\u3068\u304d\u306f\u3001DSim\u3088\u308a\u3082\u3053\u3063\u3061\u306e\u307b\u3046\u304c\u4fbf\u5229\u304b\u3082\u3057\u308c\u306a\u304f\u306a\u304f\u3082\u306a\u3044\u3002</p>","tags":["SystemVerilog","Questa"]},{"location":"questa/#questa-intel-fpga-starter-edition","title":"Questa-Intel FPGA Starter Edition\u306e\u7279\u5fb4","text":"<ul> <li>\u7121\u511f\u3067\u5229\u7528\u53ef\u80fd\u3002</li> <li>\u30e9\u30a4\u30bb\u30f3\u30b9\u306e\u53d6\u5f97\u306e\u624b\u7d9a\u304d\u304c\u3061\u3087\u3063\u3068\u3081\u3093\u3069\u3044\u3002</li> <li>\u8ffd\u52a0\u30e9\u30a4\u30bb\u30f3\u30b9\u3092\u5fc5\u8981\u3068\u3059\u308b\u6a5f\u80fd\u306f\u57fa\u672c\u7684\u306b\u4f7f\u3048\u306a\u3044\u3002</li> </ul> \u6a5f\u80fd \u5229\u7528\u53ef\u5426 SVA \u2714 OK UVM \u2714 OK \u5236\u7d04\u4ed8\u304d\u30e9\u30f3\u30c0\u30e0 \u274c <code>svverification</code>\u304c\u5fc5\u8981 User-defined nettype \u274c <code>svrnm</code>\u304c\u5fc5\u8981 Visualizer \u274c  <code>qdebug</code>\u304c\u5fc5\u8981","tags":["SystemVerilog","Questa"]},{"location":"questa/#_1","title":"\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u3068\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c","text":"run.bat<pre><code>@echo off\nset \"LM_LICENSE_FILE=\\PATH\\TO\\LR-255400_License.dat\"\nset \"qrun=C:\\altera\\24.1std\\questa_fse\\win64\\qrun.exe\"\ncd %~dp0\n%qrun% -f options.txt\npause\nexit\n</code></pre>","tags":["SystemVerilog","Questa"]},{"location":"questa/#_2","title":"\u6ce2\u5f62\u4fdd\u5b58\u306e\u4f8b","text":"options.txt<pre><code>+acc\n-do \"add log -r *; run -all;\"\ntest.sv\n</code></pre> vsim.bat<pre><code>@echo off\nset \"LM_LICENSE_FILE=\\PATH\\TO\\LR-255400_License.dat\"\nset \"vsimC:\\altera\\24.1std\\questa_fse\\win64\\vsim.exe\"\ncd %~dp0\n%vsim% vsim.wlf\nexit\n</code></pre> test.sv<pre><code>module test;\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  bit clk;\n\n  initial begin\n    $monitor(\"clk = %0b\", clk);\n    repeat(4) begin\n      #1ns;\n      clk = ~clk;\n    end\n    $finish();\n  end\n\nendmodule\n</code></pre>","tags":["SystemVerilog","Questa"]},{"location":"questa/#uvm","title":"UVM\u30c6\u30b9\u30c8\u306e\u4f8b","text":"options.txt<pre><code>-do \"run -all;\"\n-uvm\n+UVM_NO_RELNOTES\n+UVM_TESTNAME=simple_test\ntop.sv\n</code></pre> top.sv<pre><code>`include \"uvm_macros.svh\"\n\nmodule top\n  import uvm_pkg::*;\n();\n  timeunit 1ns;\n  timeprecision 1ps;\n\n  class simple_test extends uvm_test;\n    `uvm_component_utils(simple_test)\n\n    function new (string name=\"simple_test\", uvm_component parent=null);\n      super.new(name, parent);\n    endfunction\n\n    task run_phase (uvm_phase phase);\n      phase.raise_objection(this);\n      `uvm_info(get_type_name(), \"Hello\", UVM_MEDIUM)\n      `uvm_info(get_type_name(), \"World\", UVM_MEDIUM)\n      phase.drop_objection(this);\n    endtask\n  endclass\n\n  initial begin\n    run_test();\n  end\n\nendmodule\n</code></pre> Simulation result<pre><code># run -all\n# ----------------------------------------------------------------\n# UVM-1.1d\n# (C) 2007-2013 Mentor Graphics Corporation\n# (C) 2007-2013 Cadence Design Systems, Inc.\n# (C) 2006-2013 Synopsys, Inc.\n# (C) 2011-2013 Cypress Semiconductor Corp.\n# ----------------------------------------------------------------\n# UVM_INFO C:/altera/24.1std/questa_fse/verilog_src/questa_uvm_pkg-1.2/src/questa_uvm_pkg.sv(277) @ 0: reporter [Questa UVM] QUESTA_UVM-1.2.3\n# UVM_INFO C:/altera/24.1std/questa_fse/verilog_src/questa_uvm_pkg-1.2/src/questa_uvm_pkg.sv(278) @ 0: reporter [Questa UVM]  questa_uvm::init(+struct)\n# UVM_INFO @ 0: reporter [RNTST] Running test simple_test...\n# UVM_INFO top.sv(18) @ 0: uvm_test_top [simple_test] Hello\n# UVM_INFO top.sv(19) @ 0: uvm_test_top [simple_test] World\n# UVM_INFO C:/altera/24.1std/questa_fse/verilog_src/uvm-1.1d/src/base/uvm_objection.svh(1267) @ 0: reporter [TEST_DONE] 'run' phase is ready to proceed to the 'extract' phase\n</code></pre>","tags":["SystemVerilog","Questa"]},{"location":"tags/","title":"Tags","text":""},{"location":"tags/#tags","title":"Tags","text":""},{"location":"tags/#tag:dsim","title":"DSim","text":"<ul> <li>            DSim\u306e\u4f7f\u3044\u65b9          </li> </ul>"},{"location":"tags/#tag:pll","title":"PLL","text":"<ul> <li>            2\u6b21CPPLL\u30e2\u30c7\u30eb          </li> <li>            2\u6b21CPPLL\u30e2\u30c7\u30eb\u306e\u6bd4\u8f03          </li> <li>            BBPLL\u5165\u9580\u8b1b\u5ea7          </li> </ul>"},{"location":"tags/#tag:questa","title":"Questa","text":"<ul> <li>            Questa\u306e\u4f7f\u3044\u65b9          </li> </ul>"},{"location":"tags/#tag:systemverilog","title":"SystemVerilog","text":"<ul> <li>            DSim\u306e\u4f7f\u3044\u65b9          </li> <li>            Questa\u306e\u4f7f\u3044\u65b9          </li> </ul>"}]}